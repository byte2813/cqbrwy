{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\controller.js"],"names":["cc","Class","extends","Component","properties","musicMgr","require","game","pageMgr","social","config","JsonAsset","gameData","scoreMgr","totalRank","Node","groupRank","startPage","navNode","pictorial","helpPage","start","active","init","node","lateStart","closeBannerAdv","_status","getComponent","bannerNode","scale","onOpenPage","onGameStartButton","openBannerAdv","showAnimation","then","gameStart","closeRank","openRank","showRank","openGroupRank","showGroupRank","addPage","closeGroupRank","removePage","openPictorial","closePictorial","openHelpPage","closeHelpPage"],"mappings":"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","file":"controller.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["/**\n * @author uu\n * @file 主控制器\n */\n\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    musicMgr: require('musicMgr'), //音乐控制组件\n    game: require('game'), //主游戏控制器\n    pageMgr: require('pageMgr'), //页面控制器\n    social: require('social'), //排行榜、广告控制器\n    config: cc.JsonAsset,\n    gameData: cc.JsonAsset,\n    scoreMgr: require('score'), //分数 特效控制\n    totalRank: cc.Node,\n    groupRank: cc.Node,\n    startPage: require('startPage'),\n    navNode: cc.Node,\n    pictorial: cc.Node,\n    helpPage: cc.Node,\n  },\n  start() {\n    this.totalRank.active = false\n    this.pictorial.active = false\n    this.game.init(this)\n    if (this.social.node.active) {\n      this.social.init(this)\n    }\n    this.musicMgr.init()\n    this.lateStart()\n  },\n  lateStart() {\n    if (this.social.node.active) {\n      this.social.closeBannerAdv()\n\t\t}\n\t\tthis.game._status=0\n    this.pictorial.getComponent('pictorial').init(this)\n    this.startPage.bannerNode.scale = 1\n    this.pageMgr.onOpenPage(0)\n  },\n  onGameStartButton() {\n    // TODO:  增加一个动画\n    if (this.social.node.active) {\n      this.social.openBannerAdv()\n    }\n    this.startPage.showAnimation().then(() => {\n      this.gameStart()\n    })\n  },\n  gameStart() {\n    this.pageMgr.onOpenPage(1)\n    this.game.gameStart()\n  },\n  closeRank() {\n    this.totalRank.active = false\n    this.navNode.active = true\n    if (this.social.node.active) {\n      this.social.closeRank()\n    }\n  },\n  openRank() {\n    this.totalRank.active = true\n    this.navNode.active = false\n    if (this.social.node.active) {\n      this.social.showRank()\n    }\n  },\n  openGroupRank() {\n    this.groupRank.active = true\n    if (this.social.node.active) {\n      this.social.showGroupRank()\n      this.pageMgr.addPage(6)\n    }\n  },\n  closeGroupRank() {\n    this.groupRank.active = false\n    this.navNode.active = true\n    if (this.social.node.active) {\n      this.social.closeGroupRank()\n      this.pageMgr.removePage(6)\n    }\n  },\n  openPictorial() {\n    this.pictorial.active = true\n  },\n  closePictorial() {\n    this.pictorial.active = false\n  },\n  openHelpPage() {\n\t\tthis.pageMgr.addPage(2)\n    this.helpPage.active = true\n  },\n  closeHelpPage() {\n\t\tthis.pageMgr.removePage(2)\n    this.helpPage.active = false\n  }\n});"]}
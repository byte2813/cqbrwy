{"version":3,"sources":["character.js"],"names":["cc","Class","extends","Component","properties","levelUp1","Node","levelUp2","character","fail","dbArray","dragonBones","DragonBonesAsset","textureArr","DragonBonesAtlasAsset","start","loadRes","self","i","nameSke","nameTex","loader","err","assert","texture","onWalk","target","playAnimation","onLevelUp","onSuccessDialog","level","showCharacter","onLevelUpBtn","onFail","initStartPage","jump","getComponent","ArmatureDisplay","destroy","main","addComponent","dragonAsset","dragonAtlasAsset","armatureName","timeScale"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,cAAUL,GAAGM,IADH;AAEVC,cAAUP,GAAGM,IAFH;AAGVE,eAAWR,GAAGM,IAHJ;AAIVG,UAAMT,GAAGM,IAJC;AAKVI,aAAS,CAACC,YAAYC,gBAAb,CALC;AAMVC,gBAAY,CAACF,YAAYG,qBAAb;AANF,GAHL;AAWPC,OAXO,mBAWC;AACN,SAAKC,OAAL;AACD,GAbM;AAcPA,SAdO,qBAcG;AAAA;;AACR,QAAIC,OAAO,IAAX;;AADQ,+BAECC,CAFD;AAGN,UAAIC,UAAU,gBAAgBD,IAAI,CAAJ,GAAQ,EAAxB,IAA8B,MAA5C;AACA,UAAIE,UAAU,gBAAgBF,IAAI,CAAJ,GAAQ,EAAxB,IAA8B,MAA5C;AACAlB,SAAGqB,MAAH,CAAUL,OAAV,CAAkBG,OAAlB,EAA2BR,YAAYC,gBAAvC,EAAyD,UAACU,GAAD,EAAMC,MAAN,EAAiB;AACxE,cAAKb,OAAL,CAAaQ,CAAb,IAAkBK,MAAlB;AACD,OAFD;AAGAvB,SAAGqB,MAAH,CAAUL,OAAV,CAAkBI,OAAlB,EAA2BT,YAAYG,qBAAvC,EAA8D,UAACQ,GAAD,EAAME,OAAN,EAAkB;AAC9E,cAAKX,UAAL,CAAgBK,CAAhB,IAAqBM,OAArB;AACD,OAFD;AARM;;AAER,SAAK,IAAIN,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AAAA,YAApBA,CAAoB;AAS5B;AACA;AACF,GA3BM;AA4BPO,QA5BO,kBA4BAC,MA5BA,EA4BQ;AACbA,WAAOC,aAAP,CAAqB,MAArB,EAA6B,CAAC,CAA9B;AACD,GA9BM;AA+BPC,WA/BO,uBA+BK;AACV;AACD,GAjCM;AAkCPC,iBAlCO,2BAkCSC,KAlCT,EAkCgB;AACrB;AACA,SAAKC,aAAL,CAAmBD,KAAnB,EAA0B,KAAKvB,QAA/B,EAAyC,IAAzC;AAED,GAtCM;AAuCPyB,cAvCO,wBAuCMF,KAvCN,EAuCa;AAClB,SAAKC,aAAL,CAAmBD,KAAnB;AACD,GAzCM;AA0CPG,QA1CO,kBA0CAH,KA1CA,EA0CO;AACZ,SAAKC,aAAL,CAAmBD,KAAnB,EAA0B,KAAKrB,IAA/B;AACD,GA5CM;AA8CPyB,eA9CO,2BA8CS,CAEf,CAhDM;AAkDPH,eAlDO,yBAkDOD,KAlDP,EAkDcJ,MAlDd,EAkDsBS,IAlDtB,EAkD4B;AACjCT,aAASA,UAAU,KAAKlB,SAAxB;AACA,QAAIe,SAASG,OAAOU,YAAP,CAAoBzB,YAAY0B,eAAhC,CAAb;AACA;AACAd,WAAOe,OAAP;AACF;AACE,QAAIC,OAAOb,OAAOc,YAAP,CAAoB7B,YAAY0B,eAAhC,CAAX;AACAE,SAAKE,WAAL,GAAmB,KAAK/B,OAAL,CAAaoB,QAAQ,CAArB,CAAnB;AACAS,SAAKG,gBAAL,GAAwB,KAAK7B,UAAL,CAAgBiB,QAAQ,CAAxB,CAAxB;AACAS,SAAKI,YAAL,GAAoB,UAApB;AACAJ,SAAKK,SAAL,GAAiB,GAAjB;AACA;AACAL,SAAKZ,aAAL,CAAmBQ,OAAO,MAAP,GAAgB,MAAnC,EAA2C,CAAC,CAA5C;AACA;AACD;AAhEM,CAAT","file":"character.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\n  extends: cc.Component,\n\n  properties: {\n    levelUp1: cc.Node,\n    levelUp2: cc.Node,\n    character: cc.Node,\n    fail: cc.Node,\n    dbArray: [dragonBones.DragonBonesAsset],\n    textureArr: [dragonBones.DragonBonesAtlasAsset]\n  },\n  start() {\n    this.loadRes()\n  },\n  loadRes() {\n    var self = this\n    for (let i = 0; i < 15; i++) {\n      let nameSke = \"db/sanxiao\" + (i + 1 + '') + \"_ske\"\n      let nameTex = \"db/sanxiao\" + (i + 1 + '') + \"_tex\"\n      cc.loader.loadRes(nameSke, dragonBones.DragonBonesAsset, (err, assert) => {\n        this.dbArray[i] = assert\n      })\n      cc.loader.loadRes(nameTex, dragonBones.DragonBonesAtlasAsset, (err, texture) => {\n        this.textureArr[i] = texture\n      })\n    }\n     //console.log('数据加载完毕')\n  },\n  onWalk(target) {\n    target.playAnimation('walk', -1)\n  },\n  onLevelUp() {\n    //this.levelUp2.getComponent(dragonBones.ArmatureDisplay).playAnimation('jump', -1)\n  },\n  onSuccessDialog(level) {\n    // this.showCharacter(level - 1, this.levelUp1)\n    this.showCharacter(level, this.levelUp2, true)\n\n  },\n  onLevelUpBtn(level) {\n    this.showCharacter(level)\n  },\n  onFail(level) {\n    this.showCharacter(level, this.fail)\n  },\n\n  initStartPage() {\n\n  },\n\n  showCharacter(level, target, jump) {\n    target = target || this.character\n    let assert = target.getComponent(dragonBones.ArmatureDisplay)\n    //  cc.log(\"before\", assert)\n    assert.destroy()\n  //  console.log(level)\n    let main = target.addComponent(dragonBones.ArmatureDisplay)\n    main.dragonAsset = this.dbArray[level - 1]\n    main.dragonAtlasAsset = this.textureArr[level - 1]\n    main.armatureName = \"Armature\"\n    main.timeScale = 0.5\n    // console.log(\"after\", main)\n    main.playAnimation(jump ? \"jump\" : \"walk\", -1)\n    //this.onWalk(main)\n  },\n});"]}
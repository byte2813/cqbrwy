{"version":3,"sources":["pageMgr.js"],"names":["AC","require","cc","Class","extends","Component","properties","status","pages","Node","start","lateStart","width","director","getWinSizeInPixels","window","height","adoptCanvas","canvas","getScene","getChildByName","getComponent","Canvas","rateR","designResolution","rateV","fitHeight","fitWidth","onOpenPage","num","callFun","closeAllPages","active","addPage","scale","runAction","popOut","openPageTarget","target","removePage","sequence","popIn","callFunc","onButtonOpenPage","event","cust","onButtonAddPage","onButtonRemovePage","forEach","element"],"mappings":"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","file":"pageMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["/**\n * @author uu\n * @file  通用页面控制器和适配\n */\nvar AC = require('action')\ncc.Class({\n\textends: cc.Component,\n\tproperties: {\n\t\tstatus: 0, //页面状态\n\t\tpages: [cc.Node],\n\t},\n\t// 0 开始游戏页面\n\t// 1 游戏页面\n\t// 2 UI页面\n\t// 3 过关页面\n\t// 4 失败页面\n\t// 5 复活页面\n\t// 6 排行榜页面\n\n\tstart() {\n\t\tthis.lateStart()\n\t},\n\tlateStart() {\n\t\tthis.width = cc.director.getWinSizeInPixels().width\n\t\twindow.width = this.width\n\t\tthis.height = cc.director.getWinSizeInPixels().height\n\t\twindow.height = this.height\n\t\t// 存为全局变量\n\t\tthis.adoptCanvas()\n\t},\n\t// 适配解决方案\n\tadoptCanvas() {\n\t\tlet canvas = cc.director.getScene().getChildByName('Canvas').getComponent(cc.Canvas)\n\t\t// 设计分辨率比\n\t\tlet rateR = canvas.designResolution.height / canvas.designResolution.width;\n\t\t// 显示分辨率比\n\t\tlet rateV = this.height / this.width;\n\t\tif (rateV > rateR) {\n\t\t\tcanvas.fitHeight = false;\n\t\t\tcanvas.fitWidth = true;\n\t\t} else {\n\t\t\tcanvas.fitHeight = true;\n\t\t\tcanvas.fitWidth = false;\n\t\t}\n\t},\n\n\tonOpenPage(num, callFun) {\n\t\tthis.closeAllPages()\n\t\tthis.pages[num].active = true\n\t\t// if (callFun) {\n\t\t//   this.callFun();\n\t\t// }\n\t},\n\taddPage(num, callFun) {\n\t\tthis.pages[num].scale = 0.5\n\t\tthis.pages[num].active = true\n\t\tthis.pages[num].runAction(AC.popOut(0.5))\n\t\t// if (callFun) {\n\t\t//   this.callFun();\n\t\t// }\n\t},\n\topenPageTarget(target) {\n\t\ttarget.scale = 0.5\n\t\ttarget.active = true\n\t\ttarget.runAction(AC.popOut(0.5))\n\t},\n\tremovePage(num, callFun) {\n\t\tthis.pages[num].runAction(cc.sequence(AC.popIn(0.5), cc.callFunc(() => {\n\t\t\tthis.pages[num].active = false\n\t\t}, this)))\n\t\t// if (callFun) {\n\t\t//   this.callFun();\n\t\t// }\n\t},\n\tonButtonOpenPage(event, cust) {\n\t\tthis.onOpenPage(cust);\n\t},\n\tonButtonAddPage(event, cust) {\n\t\tthis.addPage(cust);\n\t},\n\tonButtonRemovePage(event, cust) {\n\t\tthis.removePage(cust);\n\t},\n\tcloseAllPages() {\n\t\tthis.pages.forEach(element => {\n\t\t\telement.active = false\n\t\t});\n\t},\n});"]}